# synchronized同步原语

## 特性
- 互斥
- 可重入性
- 非公平锁
## 使用
- 同步方法
    - 同步成员方法：针对当前类实例进行加锁
    - 同步静态方法：针对当前类的Class进行加锁
- 同步代码块
    - 使用对象作为锁：针对括号中指定的对象加锁
    - 使用Class作为锁：针对括号中指定的类的Class加锁
## 实现原理
synchronized在编译完成之后由两条指令来实现，monitorenter与monitorexit，前者表示进入同步块，后者则是退出同步块，前者插入在同步块开始处，后者插入在同步块结束或者异常处。必须保证每一个monitorenter至少有一个monitorexit与之对应，不能单独存在。

每一个对象都拥有Monitor（监视器）,使用synchronized加锁就是获取/释放对象的Monitor。

线程获取锁是什么意思呢？其实线程获取锁，其实是将锁对象的对象头信息拷贝一份保存到线程栈中，同时移除锁对象的对象头信息，释放锁的时候将线程栈中的对象头信息再恢复到锁对象中。
## 锁升级
锁的四种状态：无锁状态，偏向锁，轻量级锁，重量级锁

